<head>
  <title>Wedding Fibbage</title>
</head>

<body>
	{{#if currentUser}}{{else}} 
		{{> loginButtons}}
	{{/if}}
	{{> UI.dynamic template=message}}
	{{> UI.dynamic template=state}}
</body>
<template name="loginPrompt">
	<h1>Welcome to Wedding Fibbage</h1>
	<p>Please Login/Create an account to continue</p>
</template>
<template name="message">
	<div>Pending Messages : {{count}}</div>
	<input type="hidden" value="{{message._id}}" />
	<div>{{message.text}}</div>
	<button>ok</button>
	<br/><br/><br/>
</template>
<template name="joinRoom">
	<input type="text" max-length=4 /> 
	<button class="cancel">Cancel</button>
	<button class="submit">Play</button>
</template>
<template name="groupList">
	<span>Hello {{currentUser.username}} - <button onClick="Meteor.logout(function(){Meteor.call('setUserOffline');})">Logout</button></span>
	<div>Online Users: {{onlineUsers}}</div>
	<div>
		<form>
			<input type="text" id="groupName" placeholder="Group Name"/>
			<button type="submit">Create Group</button>
		</form>
	</div>
	<ul>
		{{#each groups}}
			{{> group}}
		{{/each}}
	</ul>
</template>
<template name="group">
	<li><button data-roomid="{{_id}}">Join</button> - {{name}} - {{ownerId}} - {{password}}</li>
</template>

<template name="gameRoom">
	<div> Room Code: {{group.password}}</div>
	{{#if isOwner}}
		<button id="disbandGroup" data-groupid="{{group._id}}">Disband Group</button>
	{{else}}
		You're in game room <button id="leaveGroup">Leave Group</button> {{group._id}} - {{group.name}}
	{{/if}}
	{{#each players}}
		{{> player}}
	{{/each}}
</template>
<template name="player">
	<li>{{username}} {{#if online}}(Online){{else}}(Offline){{/if}}</li>
</template>